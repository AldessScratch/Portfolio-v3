<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aetherium Launcher</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="./js/alerts.js"></script>
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <img src="./img/bg.png" class="bg">
    <div class="intro" id="introloading">
      <img data-aos="zoom-in" src="img/logo.png" alt="logo">
      <div id="myProgress">
        <div id="myBar"></div>
      </div>
      <script>
    var i = 0;
    
    function move() {
      if (i == 0) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 1;
    
        function frame() {
          // Randomly change the increment value for irregular movement
          var increment = Math.random() * 2; // Change this factor as needed
          width += increment;
    
          if (width >= 100) {
            document.getElementById('introloading').classList.add('loaded')
            setTimeout(() => {
              document.getElementById('introloading').style.display = 'none'
            }, 1000);
            
            clearInterval(id);
            i = 0;
          } else {
            elem.style.width = width + "%";
            requestAnimationFrame(frame);
          }
        }
    
        frame(); // Initial call to start the animation
      }
    }
    
    move();
    
      </script>
    </div>
    <div class="navbar" id="navbar">
      <div class="brand">
        <img src="img/logo.png" alt="">
        <div class="brandname">Aetherium Launcher</div>
      </div>
      <div class="right">
        <div id="minimize" onclick="minimizeWindow()" style="-webkit-app-region: none;" class="navelem">
          <i class="bx bx-minus"></i>
        </div>
    <div id="closebtn" onclick="window.close()" style="-webkit-app-region: none;" class="navelem">
          <i class="bx bx-x"></i>
        </div>
      </div>
    </div>
  
    <!--Homepage -->
    <div class="home" id="home">
      <h1>Recent news</h1>
      <div class="cards" id="cards">
        <!-- cards autogenerated from json -->
      </div>
    </div>
    <!--Mods page -->
    <div class="mods hidden" id="mods">
      <h2><i class="bx bx-grid-alt"></i> Mods</h2>
      <input id="searchInput" type="text" onkeyup="searchFunction()" placeholder="Search mods here..." class="searchbar">
      <div class="modlist" id="modlist">


      

      </div>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
    </div>
    <!-- settings page -->
    <div class="settings hidden" id="settings">
      <h2><i class="bx bx-slider"></i> Settings</h2>
      <br>
      <div class="cards2">
        <div class="card2">
          <label for="ramSlider">Select RAM allocation</label>
          <input type="range" min="1024" max="8192" value="2048" onchange="updateRam()" id="ramSlider">
          <p><span id="selectedRam">2048</span> MB</p>
        </div>
        <div class="separator"></div>






        <!--Minecraft folder path-->



        <div class="card2">
          <label for="McInput">1.8.9 Minecraft folder</label>
          <div class="mcpath">
            <input placeholder=".minecraft path" type="text" id="McPathInputBountiful">
            <button id="browseMcPathbtnBountiful">Browse</button>
          </div>
        </div>
        <div class="card2">
          <label for="McInput">1.12.2 Minecraft folder</label>
          <div class="mcpath">
            <input placeholder=".minecraft path" type="text" id="McPathInputColor">
            <button id="browseMcPathbtnColor">Browse</button>
          </div>
        </div>
        <div class="card2">
          <label for="McInput">1.19.4 Minecraft folder</label>
          <div class="mcpath">
            <input placeholder=".minecraft path" type="text" id="McPathInputWild">
            <button id="browseMcPathbtnWild">Browse</button>
          </div>
        </div>












        <div class="separator"></div>
        <div class="card2">
          <label for="launcheraction">Launch action</label>
            <select id="launcheractionselect">
              <option value="keepopen">Keep open</option>
              <option value="hide">Hide</option>
              <option value="close">Close</option>
            </select>
        </div>
        <div class="separator"></div>
          <div class="card3">
            <label for="info">Infos</label>
            <br>
            <div class="smalltext">Launcher frontend made by AldessSc</div>
            <div class="smalltext">Launcher backend made by Refactoring</div>
          </div>
        </div>
        <div class="separator"></div>
          <div class="card2">
            <label for="info">Quick actions</label>
            <div class="buttons">
              <button id="openmodsfolder" class="quickactionbutton">Open mods folder</button>
              <button id="openmcfolder" class="quickactionbutton">Open minecraft folder</button>
            </div> 
          </div>
          <br>
        <br>
        <br>
        <br>
        <br>
    </div>
        
        </div>
       
      </div>
      <!--Versions switcher-->
      <div class="hidden versionswitcher" id="versionswitcher">
        <h2>Versions</h2>
        <div class="versionslist">
          <div id="1.8.9" class="version" style=" background-image: url('./img/1.8.9.png');">
            <span class="vers">1.8.9</span>
            <span class="versname">The Bountiful Update</span>
          </div>
          <div id="1.12.2" class="version" style=" background-image: url('./img/1.12.2.png');">
            <span class="vers">1.12.2</span>
            <span class="versname">The World of Color Update</span>
          </div>
          <div id="1.19.4" class="version" style=" background-image: url('./img/1.19.4.png');">
            <span class="vers">1.19.4</span>
            <span class="versname">The Wild Update</span>
          </div>

        </div>
      </div>
       <!--selected version effect-->
     <script>
      document.getElementById('1.8.9').classList.add('versionselected')
     </script>
     
      
  
  
  
    <div class="bottombar">
      <div id="homeelem" class="navelem active"
        onclick="document.getElementById('settings').classList.add('hidden');document.getElementById('versionswitcher').classList.add('hidden');document.getElementById('home').classList.remove('hidden');document.getElementById('homeelem').classList.add('active');document.getElementById('setelem').classList.remove('active');document.getElementById('modelem').classList.remove('active')">
        <i class="bx bx-home"></i>
      </div>
      <div id="setelem" class="navelem"
        onclick="document.getElementById('settings').classList.remove('hidden');document.getElementById('versionswitcher').classList.add('hidden');document.getElementById('home').classList.add('hidden');document.getElementById('setelem').classList.add('active');document.getElementById('homeelem').classList.remove('active');document.getElementById('modelem').classList.remove('active')">
        <i class="bx bx-cog"></i>
      </div>
      <div id="modelem" class="navelem"
        onclick="document.getElementById('settings').classList.add('hidden');document.getElementById('versionswitcher').classList.remove('hidden');document.getElementById('home').classList.add('hidden');document.getElementById('modelem').classList.add('active');document.getElementById('setelem').classList.remove('active');document.getElementById('homeelem').classList.remove('active')">
        <i class="bx bx-transfer"></i>
      </div>
      <button id="launchbutton" onclick="starting()">
        <i class="bx bx-play"></i>
        LAUNCH 1.8.9
  
      </button>
      <script src="./launcher.js"></script>
      <div onclick="openURLInBrowser('https://www.youtube.com/@aetheriumclient')" class="navelem">
        <i class="bx bxl-youtube"></i>
      </div>
      <div onclick="openURLInBrowser('https://github.com/aetherium-Development/')" class="navelem">
        <i class="bx bxl-github"></i>
      </div>
      <div onclick="openURLInBrowser('https://discord.com/invite/JUDvJc6X5B')" class="navelem">
        <i class="bx bxl-discord-alt"></i>
      </div>
    </div>
  

  <script>
    AOS.init()
  </script>

  <script>
    // json url
    const jsonUrl = 'https://d0178ab4-2a52-4e44-964d-8f715fa5345a-00-xjh4h9vn0v02.global.replit.dev/news.json';

    //lol
    fetch(jsonUrl).then(response => response.json()).then(data => {
      const rendercards = (cards) => {
        cards.forEach(cards => {
          const cardscontainer = document.getElementById('cards');
          const card = document.createElement('div')
          const imgcontainer = document.createElement('div')
          const header = document.createElement('div')
          const content = document.createElement('div')
          const author = document.createElement('div')
          const date = document.createElement('div')
          const img = document.createElement('img')
          const text = document.createElement('div')
          const authorimg = document.createElement('img')
          const textcontent = document.createElement('div')

          card.classList.add('card');
          imgcontainer.classList.add('imgcontainer');
          header.classList.add('header');
          content.classList.add('content');
          author.classList.add('author');
          date.classList.add('date');
          text.classList.add('text');
          authorimg.classList.add('authorimg');
          textcontent.classList.add('textcontent')
          img.src = cards.imgurl
          content.innerHTML = cards.content
          text.innerHTML = cards.author
          date.innerHTML = cards.date
          authorimg.src = cards.authorimgurl
          content.innerHTML = cards.content


          cardscontainer.appendChild(card)
          card.appendChild(imgcontainer)
          imgcontainer.appendChild(img)
          card.appendChild(textcontent)
          textcontent.appendChild(header)
          header.appendChild(author)
          author.appendChild(authorimg)
          author.appendChild(text)
          header.appendChild(date)
          textcontent.appendChild(content)
          let items = document.querySelectorAll('.cards .card');
          let active = 0;
          function loadShow() {
            items[active].style.transform = `none`;
            items[active].style.zIndex = 1;
            items[active].style.filter = 'none';
            items[active].style.opacity = 1;
            // show after
            let stt = 0;
            for (var i = active + 1; i < items.length; i++) {
              stt++;
              items[i].style.transform = `translateX(${200 * stt}px) scale(${1 - 0.2 * stt}) rotateY(-1deg)`;
              items[i].style.zIndex = -stt;
              items[i].style.filter = 'blur(5px)';
              items[i].style.opacity = stt > 2 ? 0 : 0.6;
            }
            stt = 0;
            for (var i = (active - 1); i >= 0; i--) {
              stt++;
              items[i].style.transform = `translateX(${-200 * stt}px) scale(${1 - 0.2 * stt}) rotateY(1deg)`;
              items[i].style.zIndex = -stt;
              items[i].style.filter = 'blur(5px)';
              items[i].style.opacity = stt > 2 ? 0 : 0.6;
            }
          }
          loadShow();
          function handleWheel(event) {
            // Get the deltaY property to determine the direction of the scroll
            var deltaY = event.deltaY;

            // Check if the user is scrolling up or down
            if (deltaY < 0) {
              active = active - 1 >= 0 ? active - 1 : active;
              loadShow();

            } else if (deltaY > 0) {
              active = active + 1 < items.length ? active + 1 : active;
              loadShow();
            }
          }
          window.addEventListener('wheel', handleWheel);
        })
      };
      rendercards(data);

    }).catch(error => console.error('Error fetching cards:', error));

  </script>
  <script>
    function searchFunction() {
            let input = document.getElementById('searchInput');
            let filter = input.value.toUpperCase();
            let cards = document.getElementsByClassName('mod');
        
            for (i = 0; i < cards.length; i++) {
                let title = cards[i].getElementsByTagName('h3')[0];
                let txtValue = title.textContent || title.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    cards[i].style.display = "";
                } else {
                    cards[i].style.display = "none";
                }
            }
        }
  </script>
  <script>
    // json url
    const modsjson = './mods.json';

    //lol
    fetch(modsjson).then(response => response.json()).then(data => {
      const rendermods = (mods) => {
        mods.forEach(mods => {
          const modlist = document.getElementById('modlist')
          const mod = document.createElement('div')
          const left = document.createElement('div')
          const modprop = document.createElement('div')
          const right = document.createElement('div')
          const button = document.createElement('button')
          const img = document.createElement('img')
          const modtitle = document.createElement('h3')
          const desc = document.createElement('h4')
          const author = document.createElement('h4')

          mod.classList.add('mod')
          left.classList.add('left')
          modprop.classList.add('modprop')
          right.classList.add('right')
          img.src = mods.img
          modtitle.innerHTML = mods.title + ` <i onclick="openURLInBrowser('${mods.repo}')" class="bx bx-link-external"></i>`
          desc.innerHTML = mods.desc
          author.innerHTML = 'Made by ' + mods.author
          button.innerHTML = 'Install'
          button.setAttribute('id', `download+${mods.title}`)

          modlist.appendChild(mod)
          mod.appendChild(left)
          left.appendChild(img)
          left.appendChild(modprop)
          modprop.appendChild(modtitle)
          modprop.appendChild(desc)
          modprop.appendChild(author)
          mod.appendChild(right)
 
        
        

        })
      };
      rendermods(data);

    }).catch(error => console.error('Error fetching cards:', error));

  </script>
</body>

</html>